@page "/addvoter"
@using System.ComponentModel.DataAnnotations
<link href="forms.css" rel="stylesheet" />

<div class="form-container">
    <h1>DODAWANIE WYBORCY DO OBWODU</h1>
    <EditForm Model="@voterModel" OnValidSubmit="HandleAddSubmit">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="form-group-smaller">
            <label for="pesel">PESEL WYBORCY</label>
            <InputText @bind-Value="voterModel.PESEL" id="pesel" class="form-input" placeholder="Nr Pesel wyborcy" />
        </div>
        <div class="form-group-smaller">
            <label for="wojewodztwo">WOJEWÓDZTWO</label>
            <select @bind="voterModel.Wojewodztwo" id="wojewodztwo" class="form-input">
                <option value="">Wybierz województwo</option>
                @foreach (var woj in voivodeships)
                {
                    <option value="@woj">@woj</option>
                }
            </select>
        </div>
        <div class="form-group-smaller">
            <label for="powiat">POWIAT</label>
            <select @bind="voterModel.Powiat" id="powiat" class="form-input">
                <option value="">Wybierz powiat</option>
                @foreach (var pow in counties)
                {
                    <option value="@pow">@pow</option>
                }
            </select>
        </div>
        <div class="form-group-smaller">
            <label for="gmina">GMINA</label>
            <select @bind="voterModel.Gmina" id="gmina" class="form-input">
                <option value="">Wybierz gminę</option>
                @foreach (var gmina in provinces)
                {
                    <option value="@gmina">@gmina</option>
                }
            </select>
        </div>
        <div class="form-group-smaller">
            <label for="numer-obwodu">NUMER OBWODU</label>
            <select @bind="voterModel.NumerObwodu" id="numer-obwodu" class="form-input">
                <option value="">Wybierz numer obwodu</option>
                @foreach (var obwod in districtNumbers)
                {
                    <option value="@obwod">@obwod</option>
                }
            </select>
        </div>

        <div class="form-row">
            <button type="submit" class="submit-button">DODAJ</button>
            <button type="button" class="submit-button" @onclick="Cancel">ANULUJ</button>
        </div>
    </EditForm>
</div>

@code {
    private VoterModel voterModel = new VoterModel();

    private List<string> voivodeships = new() { "Mazowieckie", "Śląskie", "Małopolskie" };
    private List<string> counties = new() { "Powiat 1", "Powiat 2", "Powiat 3" };
    private List<string> provinces = new() { "Gmina 1", "Gmina 2", "Gmina 3" };
    private List<string> districtNumbers = new() { "Obwód 1", "Obwód 2", "Obwód 3" };

    private void HandleAddSubmit()
    {
        Console.WriteLine($"Dodano wyborcę o numerze PESEL: {voterModel.PESEL}");
    }

    private void Cancel()
    {
        Console.WriteLine("Anulowano dodawanie wyborcy.");
    }

    public class VoterModel
    {
        [Required(ErrorMessage = "Numer PESEL jest wymagany.")]
        public string PESEL { get; set; }

        [Required(ErrorMessage = "Województwo jest wymagane.")]
        public string Wojewodztwo { get; set; }

        [Required(ErrorMessage = "Powiat jest wymagany.")]
        public string Powiat { get; set; }

        [Required(ErrorMessage = "Gmina jest wymagana.")]
        public string Gmina { get; set; }

        [Required(ErrorMessage = "Numer obwodu jest wymagany.")]
        public string NumerObwodu { get; set; }
    }
}
