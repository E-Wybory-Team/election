@page "/edit-district"
@using System.ComponentModel.DataAnnotations
@using Microsoft.AspNetCore.Components.Forms

<link href="forms.css" rel="stylesheet" />

<div class="form-container">
    <h1>MODYFIKOWANIE OBWODU WYBORCZEGO</h1>

    <EditForm Model="@districtModel" OnValidSubmit="HandleSubmit">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="form-group">
            <label for="districtNumber">NR OBWODU</label>
            <InputNumber @bind-Value="districtModel.DistrictNumber" id="districtNumber" placeholder="Nr obwodu wyborczego" />
        </div>

        <div class="form-group">
            <label for="wojewodztwo">WOJEWÓDZTWO</label>
            <InputSelect id="wojewodztwo" @bind-Value="districtModel.SelectedWojewodztwoId">
                <option value="">Wybierz województwo</option>
                @foreach (var wojewodztwo in wojewodztwa)
                {
                    <option value="@wojewodztwo.IdWojewodztwo">@wojewodztwo.WojewodztwoName</option>
                }
            </InputSelect>
        </div>

        <div class="form-group">
            <label for="powiat">POWIAT</label>
            <InputSelect id="powiat" @bind-Value="districtModel.SelectedPowiatId">
                <option value="">Wybierz powiat</option>
                @foreach (var powiat in powiaty)
                {
                    <option value="@powiat.IdPowiat">@powiat.PowiatName</option>
                }
            </InputSelect>
        </div>

        <div class="form-group">
            <label for="gmina">GMINA</label>
            <InputSelect id="gmina" @bind-Value="districtModel.SelectedGminaId">
                <option value="">Wybierz gminę</option>
                @foreach (var gmina in gminy)
                {
                    <option value="@gmina.IdGmina">@gmina.GminaName</option>
                }
            </InputSelect>
        </div>

        <button type="submit" class="submit-button">ZATWIERDŹ ZMIANY</button>
    </EditForm>
</div>

@code {
    private DistrictModel districtModel = new DistrictModel();

    private void HandleSubmit()
    {
        // Logika modyfikowania obwodu wyborczego
        Console.WriteLine($"Zmodyfikowano obwód: {districtModel.DistrictNumber}");
    }

    // Lista województw, powiatów i gmin
    private List<Wojewodztwo> wojewodztwa = new List<Wojewodztwo>
    {
        new Wojewodztwo { IdWojewodztwo = 1, WojewodztwoName = "Opolskie" },
        new Wojewodztwo { IdWojewodztwo = 2, WojewodztwoName = "Mazowieckie" },
        new Wojewodztwo { IdWojewodztwo = 3, WojewodztwoName = "Małopolskie" }
    };

    private List<Powiat> powiaty = new List<Powiat>
    {
        new Powiat { IdPowiat = 1, PowiatName = "Powiat 1" },
        new Powiat { IdPowiat = 2, PowiatName = "Powiat 2" },
        new Powiat { IdPowiat = 3, PowiatName = "Powiat 3" }
    };

    private List<Gmina> gminy = new List<Gmina>
    {
        new Gmina { IdGmina = 1, GminaName = "Gmina 1" },
        new Gmina { IdGmina = 2, GminaName = "Gmina 2" },
        new Gmina { IdGmina = 3, GminaName = "Gmina 3" }
    };

    public class DistrictModel
    {
        [Required(ErrorMessage = "Nr obwodu jest wymagany")]
        public int DistrictNumber { get; set; }

        [Required(ErrorMessage = "Województwo jest wymagane")]
        public int SelectedWojewodztwoId { get; set; }

        [Required(ErrorMessage = "Powiat jest wymagany")]
        public int SelectedPowiatId { get; set; }

        [Required(ErrorMessage = "Gmina jest wymagana")]
        public int SelectedGminaId { get; set; }
    }

    public class Wojewodztwo
    {
        [Required] public int IdWojewodztwo { get; set; }
        [Required] public string WojewodztwoName { get; set; }
    }

    public class Powiat
    {
        [Required] public int IdPowiat { get; set; }
        [Required] public string PowiatName { get; set; }
    }

    public class Gmina
    {
        [Required] public int IdGmina { get; set; }
        [Required] public string GminaName { get; set; }
    }
}
